{% extends 'cmdb/base.html' %}
{#标题#}
{% block page_title %} 服务器清单{% endblock %}

{#内容导航条部分#}
{% block content_header %}
    服务器清单
{% endblock %}
{% block content_header_2 %}
    服务器清单
{% endblock %}

<!--内容区域-->
{% block main_content %}
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">以下是我们记录的所有内容</h3>

                </div>
                <div class="card-body">
                    <table id="example1" class="table table-bordered table-hover">
                        <thead>
                        <tr>
                            <th>序列号</th>
                            <th>服务器名称</th>
                            <th>操作系统名称</th>
                            <th>管理IP</th>
                            <th>记录时间</th>
                            <th>记录者</th>
                            <th>更新者</th>
                            <th>更新日期</th>
                            <th>备注</th>
                            <th>删除标记</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>Trident</td>
                            <td>Internet
                                Explorer 4.0
                            </td>
                            <td>Win 95+</td>
                            <td> 4</td>
                            <td>X</td>
                            <td>Trident</td>
                            <td>Internet
                                Explorer 4.0
                            </td>
                            <td>Win 95+</td>
                            <td> 4</td>
                            <td>X</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block user_js %}
    <script type="text/javascript">
        $(document).ready(function () {
            $(function () {
                $("#example1").DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    // 是否开启本地分页
                    "paging": true,
                    // 是否开启本地排序
                    "ordering": true,
                    // 是否显示左下角信息
                    "info": true,
                    // 是否允许用户改变表格每页显示的记录数
                    "lengthChange": true,
                    // 是否显示处理状态(排序的时候，数据很多耗费时间长的话，也会显示这个)
                    "processing": true,
                    // 是否允许 DataTables 开启本地搜索
                    "searching": true,
                    // 是否开启服务器模式;如果是服务器请求数据,则下面设置为true
                    "serverSide": false,
                    // 控制 DataTables 的延迟渲染，可以提高初始化的速度
                    "deferRender": true,
                    // 分页按钮显示选项
                    "pagingType": "full_numbers",
                    // 增加或修改通过 Ajax 提交到服务端的请求数据
                    "ajax": {
                        "url": "/cmdb/page",
                        "type": "POST",
                        "dataSrc": 'data'
                    },
                    // 设置列的数据源
                    "columns": [
                        {"data": "sn"},
                        {"data": "name"},
                        {
                            "data": 'os_type',
                             "render": function (data, type, row, meta) {
                                //这个效果是超过的 隐藏，类似效果自己扩展吧
                                 if(data=='W'){
                                     return '<i class="fas fa-th-large"></i>'
                                 }else if(data=='A'){
                                     return '<i class="fa fa-apple-alt" aria-hidden="true"></i>'
                                 }else{
                                     return '未知'
                                 }

                            }
                        },
                        {
                            "data": "manage_ip"
                        },
                        {
                            "data": "create_time",
                            "render": function (data, type, row, meta) {
                                //这个效果是超过的 隐藏，类似效果自己扩展吧
                                return "<div style='width:150px;text-align:left;overflow:hidden;text-overflow:ellipsis;white-space: nowrap;'" + "title='" + data + "'>" + data + "</div>";
                            }
                        },

                        {"data": "creator"},
                        {"data": "updator"},
                        {
                            "data": 'update_time',
                            "render": function (data, type, row, meta) {
                                //这个效果是超过的 隐藏，类似效果自己扩展吧white-space: nowrap;为不换行多的用...代替
                                return "<div style='width:150px;text-align:left;overflow:hidden;text-overflow:ellipsis;white-space: nowrap;'" + "title='" + data + "'>" + data + "</div>";
                            }
                        },
                        {
                            "data": "memo"
                        },
                        {
                            "data": "flag_delted",
                            "render": function (obj) {
                                if (obj == false) {
                                    return "<span class='text-success'>正常</span>"
                                } else {
                                    return "<span class='text-danger'>已删除</span>"
                                }
                            }
                        }
                    ],
                    // 国际化
                    "language":
                        {
                            "sProcessing":
                                "处理中...",
                            "sLengthMenu":
                                "显示 _MENU_ 项结果",
                            "sZeroRecords":
                                "没有匹配结果",
                            "sInfo":
                                "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
                            "sInfoEmpty":
                                "显示第 0 至 0 项结果，共 0 项",
                            "sInfoFiltered":
                                "(由 _MAX_ 项结果过滤)",
                            "sInfoPostFix":
                                "",
                            "sSearch":
                                "搜索:",
                            "sUrl":
                                "",
                            "sEmptyTable":
                                "表中数据为空",
                            "sLoadingRecords":
                                "载入中...",
                            "sInfoThousands":
                                ",",
                            "oPaginate":
                                {
                                    "sFirst":
                                        "首页",
                                    "sPrevious":
                                        "上页",
                                    "sNext":
                                        "下页",
                                    "sLast":
                                        "末页"
                                }
                            ,
                            "oAria":
                                {
                                    "sSortAscending":
                                        ": 以升序排列此列",
                                    "sSortDescending":
                                        ": 以降序排列此列"
                                }
                        },


                });
            });

        });

    </script>
{% endblock %}
